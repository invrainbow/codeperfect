<!doctype html>
<html lang="{{ .Site.LanguageCode | default "en" }}">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    {{ if eq (hugo.Environment) "development" -}}
      {{ $options := (dict "targetPath" "app.css" "enableSourceMap" true "includePaths" (slice "node_modules")) -}}
      {{ $css := resources.Get "scss/app.scss" | toCSS $options | postCSS (dict "config" "config/postcss.config.js") -}}
      <link rel="stylesheet" href="{{ $css.RelPermalink }}">
    {{ else -}}
      {{ $options := (dict "targetPath" "app.css" "outputStyle" "compressed" "includePaths" (slice "node_modules")) -}}
      {{ $css := resources.Get "scss/app.scss" | toCSS $options | postCSS (dict "config" "config/postcss.config.js") -}}
      {{ $secureCSS := $css | resources.Fingerprint "sha512" -}}
      <link rel="stylesheet" href="{{ $secureCSS.Permalink }}" integrity="{{ $secureCSS.Data.Integrity }}" crossorigin="anonymous">
    {{ end -}}

    <noscript><style>img.lazyload { display: none; }</style></noscript>
  </head>

  {{ if eq .Kind "home" -}}
    {{ .Scratch.Set "class" "home" -}}
  {{ else if eq .Kind "404" -}}
    {{ .Scratch.Set "class" "error404" -}}
  {{ else if eq .Kind "page" -}}
    {{ .Scratch.Set "class" .Type -}}
    {{ .Scratch.Add "class" " single" -}}
  {{ else -}}
    {{ .Scratch.Set "class" .Type -}}
    {{ .Scratch.Add "class" " list" -}}
  {{ end -}}

  <body>
    <header class="p-4">
      <div class="max-w-screen-xl px-8 mx-auto flex justify-between">
        <a class="logo font-bold text-black text-lg" href="/">
          CodePerfect 95
          <span class="font-bold text-gray-400 text-base ml-1">Docs</span>
        </a>

        <!--
        <form class="flex-grow-1">
          <input id="userinput" class="w-64 text-sm bg-transparent border border-gray-400 rounded-md py-1 px-3 outline-none focus:border-gray-600" type="text" placeholder="Search docs..." autocomplete="off">
          <div id="suggestions" class="shadow rounded"></div>
        </form>
        -->
      </div>
    </header>

    <div>{{ block "main" . }}{{ end }}</div>

    <footer class="p-4 py-6">
      <div class="max-w-screen-xl px-8 mx-auto flex justify-between text-gray-600 text-sm">
        <span>&copy; CodePerfect 95</span>
        <span>
          {{ range .Site.Menus.footer -}}
            <a class="ml-4" href="{{ .URL | relURL }}">{{ .Name }}</a>
          {{ end -}}
        </span>
      </div>
    </footer>

    <script>
      var pat = new RegExp("â–ˆ", "gi");
      document.body.innerHTML = document.body.innerHTML.replace(
        pat, function(matched) {
          return "<span class=\"caret\">" + matched + "</span>";
        }
      );
    </script>

  </body>
</html>
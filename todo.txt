Ideas
=====

Log window. A kind of log window showing what's happening behind the
scenes, but not autistic developer debug notes -- stuff that actually allows
the user to build a model of how their tool is working and a closer
relationship with the IDE. For example, "detected import, now indexing ___".

Context-aware autocomplete, including, if you're in a toplevel, all you
can write is func, const, var, and type.


Tasks
=====

Create a string class.

COME UP WITH A GOOD NAME.

Use our allocator for uthash_malloc.

Right now, when we call make_file_ast on the current file during autocomplete
or gotodef, we assume current package name is world.wksp.go_import_path. This
will fail if user edits files outside current workspace. Need function to
translate directory path into import path. Update: world.wksp.go_import_path
has been replaced with get_workspace_import_path().

Now that our memory isn't retarded anymore, rework Scoped_Table to not use
LIST_MALLOC. And also just rewrite large sections of Parser.

See how many LIST_MALLOCs should just be LIST_POOLs.

Handle unicode. If we don't handle the stupid Unicode situation soon, we're
going to be fucked the longer we wait. Need to get that shit over with.
Probably the first thing we need to do as soon as indexing is done.

Handle nested vendor directories for Go too. And nested go.mod.

Add clipboard support to editor, both vim paste and ctrl+v.

Make parameter hint open back up when comma is typed.

In parameter hint, highlight which parameter we're currently on.

In parameter hint, close hint when end paren is typed.

Add syntax highlighting to parameter hint.

Since we depend so heavily on the index for all aspects of intellisense (e.g.
find_decl_of_id relies on it directly), we MUST invalidate the index as soon as
a file changes.

Make sure list_methods_in_type also checks methods in embedded fields of
structs.

Enable adding new files/folder in file explorer.

Sort autocomplete by relevance (want most likely hit to be first one).

Our neovim integration gives complete access to :commands, /search, etc. Think
about how we should handle this. Also, Vim highlights when I search for stuff
are weird.

Make autocomplete on a blank line include accessible decls in current file.

When you press `ce` after a dot as in "instance_of_struct.", it will open
autocomplete. I THINK (if memory serves me) all it basically does is "after
every keystroke, if we land to the right of a dot, trigger autocomplete. Need
to fix this.

A group of changes needs to be made to fix a large class of problems.
 - Hand-roll our own syntax parser (stop using nvim's)
 - In insert mode, handle input ourselves
This can be done in order.
 - [x] Turn off current syntax highlighting
 - [x] Get native input handling working
 - [ ] Write our own syntax highlighter.
I predict this will stop about 80% of our stupid random crashes. nvim should
really only be used to handle the stuff nvim excels at, namely, normal-mode
commands.

Add autoindent to insert mode (no longer handled by nvim).


Bugs
====

Syntax highlighting is weird/slow/jumpy.

When you resize a pane too small, it ruins syntax highlighting.

When tabs overflow the tab bar, current tab just goes offscreen.

When you press tab to fill in autocomplete without typing any prefix, it
autocompletes, but leaves the menu open (and moves it to your cursor).

If you press shift+escape on a parameter hint, you can move around and
the parameter hit will stay open and follow you.

Typing "foo(bar(" will use autocomplete for foo, not bar.

Earlier, when typing a literal value, it got into an infinite loop,
presumably inside parse_literal_value (judging by both the context of the crash
and also the error message it was printing out was from eat_comma). Can't
repro right now, but it's there.


Purgatory
=========

[bug?] Go_Index reindexes twice whenever we save a file.  Update: I mean, the
debounce stops it from reindexing twice, but savig a file still sends two
filesystem change events. Not sure if worth fixing.
